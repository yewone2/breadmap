

<html layout:decorate="~{layout}">
<div layout:fragment="content" class="container">
 	
	<br><br>
	
<form th:object="${questionForm}" method="post">
	<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
			
	<div th:replace="~{form_errors :: formErrorsFragment}"></div>
		
	<ul class="question_form">
		<li>
			<div class="question_form">
				<select th:field="*{category}" class="select">
					<option value="">ì§€ì—­ì„ ì„ íƒí•´ ì£¼ì„¸ìš”ğŸ¥</option>
					<option value="ë™êµ¬">ë™êµ¬</option>
					<option value="ì¤‘êµ¬">ì¤‘êµ¬</option>
					<option value="ì„œêµ¬">ì„œêµ¬</option>
					<option value="ìœ ì„±êµ¬">ìœ ì„±êµ¬</option>
					<option value="ëŒ€ë•êµ¬">ëŒ€ë•êµ¬</option>
				</select> 
				
				<input type="text" class="form_subject" placeholder=" ì œëª©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”." th:field="*{subject}"></div> 


				<form method="post" action="ì²˜ë¦¬ í˜ì´ì§€" enctype="multipart/form-data">
				    <!-- ìˆ˜ì • í˜ì´ì§€ì—ì„œ ì›ì‹œ ì½”ë“œ ë³´ì¡´ì„ ìœ„í•œ temp ë¶€ë¶„ -->
				    <div id="temp" style="display: none"></div>

				    <!-- ì¸ë¨¸ë…¸íŠ¸ ì—ë””í„° -->
				    <textarea id="summernote" name="content"></textarea>

				    <!-- ì„ì‹œì €ì¥ê³¼ ì €ì¥ ë²„íŠ¼ -->
				    <input type="submit" name="doit" value="ì €ì¥" />
				</form>

				<script>
				    // ìˆ˜ì •í˜ì´ì§€ì—ì„œ ì›ì‹œ ì½”ë“œ ë³´ì¡´ì„ í†µí•œ ì½”ë“œ ê¹¨ì§ ë°©ì§€
				    window.onload = function () {
				        $('#summernote').summernote('code', document.getElementById('temp').innerHTML)
				    }

				    $(document).ready(function () {
				        $('#summernote').summernote({
				            // ì¸ë¨¸ë…¸íŠ¸ ì˜µì…˜ ì„¤ì •
				            codeviewFilter: false,
				            codeviewIframeFilter: false,
				            disableXSSProtection: true,
				            height: 500,
				            minHeight: null,
				            maxHeight: null,
				            focus: true,
				            lang: 'ko-KR',
				            toolbar: [
				                // ìŠ¤íƒ€ì¼ ê´€ë ¨ ê¸°ëŠ¥
				                ['style', ['style']],
				                // ê¸€ì í¬ê¸° ì„¤ì •
				                ['fontsize', ['fontsize']],
				                // ê¸€ê¼´ ìŠ¤íƒ€ì¼
				                ['font', ['bold', 'underline', 'clear']],
				                // ê¸€ì ìƒ‰ìƒ
				                ['color', ['color']],
				                // í…Œì´ë¸” ì‚½ì…
				                ['table', ['table']],
				                // ë¬¸ë‹¨ ìŠ¤íƒ€ì¼
				                ['para', ['paragraph']],
				                // ì—ë””í„° ë†’ì´ ì„¤ì •
				                ['height', ['height']],
				                // ì´ë¯¸ì§€, ë§í¬, ë™ì˜ìƒ ì‚½ì…
				                ['insert', ['picture', 'link', 'video']],
				                // ì½”ë“œ ë³´ê¸°, ì „ì²´í™”ë©´, ë„ì›€ë§
				                ['view', ['codeview', 'fullscreen', 'help']],
				            ],
				            fontSizes: [
				                // ê¸€ì í¬ê¸° ì„ íƒ ì˜µì…˜
				                '8', '9', '10', '11', '12', '14', '16', '18', '20', '22', '24', '28', '30', '36', '50', '72'
				            ],
				            styleTags: [
				                // ìŠ¤íƒ€ì¼ íƒœê·¸ ì˜µì…˜
				                'p',
				                { title: 'Blockquote', tag: 'blockquote', className: 'blockquote', value: 'blockquote' },
				                'pre',
				                { title: 'code_light', tag: 'pre', className: 'code_light', value: 'pre' },
				                { title: 'code_dark', tag: 'pre', className: 'code_dark', value: 'pre' },
				                'h1', 'h2', 'h3', 'h4', 'h5', 'h6'
				            ],

				            callbacks: {
				                onImageUpload: function (files, editor, welEditable) {
				                    // íŒŒì¼ ì—…ë¡œë“œ
				                    for (var i = files.length - 1; i >= 0; i--) {
				                        var fileName = files[i].name
				                        <!--var caption = prompt('ì´ë¯¸ì§€ ì„¤ëª…:', fileName)-->
				                        if (caption == '') {
				                            caption = 'ì´ë¯¸ì§€'
				                        }
				                        uploadSummernoteImageFile(files[i], this, caption)
				                    }
				                },
				                onMediaDelete: function ($target, editor, $editable) {
				                    // ì‚­ì œëœ ì´ë¯¸ì§€ì˜ íŒŒì¼ ì´ë¦„ì„ ì•Œì•„ë‚´ê¸° ìœ„í•´ split í™œìš©
				                    if (confirm('ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
				                        var deletedImageUrl = $target.attr('src').split('/').pop()

				                        // ajax í•¨ìˆ˜ í˜¸ì¶œ
				                        deleteSummernoteImageFile(deletedImageUrl)
				                    }
				                },
				            },
				        })
				    })

				    // ì´ë¯¸ì§€ ì—…ë¡œë“œ ajax
				    function uploadSummernoteImageFile(file, el, caption) {
				        data = new FormData()
				        data.append('file', file)
				        $.ajax({
				            data: data,
				            type: 'POST',
				            url: 'uploadSummernoteImageFile',
				            contentType: false,
				            enctype: 'multipart/form-data',
				            processData: false,
				            success: function (data) {
				                $(el).summernote('editor.insertImage', data.url, function ($image) {
				                    $image.attr('alt', caption) // ìº¡ì…˜ ì •ë³´ë¥¼ ì´ë¯¸ì§€ì˜ alt ì†ì„±ì— ì„¤ì •
				                })
				            },
				        })
				    }

				    // ì´ë¯¸ì§€ ì‚­ì œ ajax
				    function deleteSummernoteImageFile(imageName) {
				        data = new FormData()
				        data.append('file', imageName)
				        $.ajax({
				            data: data,
				            type: 'POST',
				            url: 'deleteSummernoteImageFile',
				            contentType: false,
				            enctype: 'multipart/form-data',
				            processData: false,
				        })
				    }
				</script>
	</body>
</html>